version: "3"

services:
  calculator:
    container_name: calculator
    image: stocky-calculator-service:dev
    restart: always
    command: "uvicorn main:app --reload --host 0.0.0.0 --port 80"
    environment:
      - docker.env
    volumes:
      - ./calculator-service:/app
    ports:
      - "8080:80"

  client:
    container_name: client
    image: stocky-client-service:dev
    restart: always
    environment:
      - docker.env
    volumes:
      - /app/node_modules
      - ./client-service:/app
    ports:
      - "3000:3000"

  orchestrator:
    container_name: orchestrator
    image: stocky-orchestrator-service:dev
    restart: always
    command: "npm run dev"
    environment:
      - docker.env
    volumes:
      - /app/node_modules
      - ./orchestrator-service:/app
    ports:
      - "5000:3000"
    